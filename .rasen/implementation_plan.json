{
  "task_name": "Enhance loop.py to use get_recovery_hints() for richer recovery context",
  "subtasks": [
    {
      "id": "subtask-1",
      "description": "Update loop.py lines 291-298 to call get_recovery_hints() instead of get_failed_approaches() and store result in recovery_hints variable",
      "status": "pending",
      "attempts": 0,
      "last_approach": null
    },
    {
      "id": "subtask-2",
      "description": "Replace failed_section formatting logic with recovery hints formatting that shows attempt count, success/failure status, and warnings (matching Auto-Claude pattern from prompt_generator.py:196-207)",
      "status": "pending",
      "attempts": 0,
      "last_approach": null
    },
    {
      "id": "subtask-3",
      "description": "Update the prompt template variable name from failed_section to recovery_section or similar to reflect the richer context being provided",
      "status": "pending",
      "attempts": 0,
      "last_approach": null
    },
    {
      "id": "subtask-4",
      "description": "Add unit tests for the new recovery hints formatting in loop.py to verify attempt count, status display, and warnings are formatted correctly",
      "status": "pending",
      "attempts": 0,
      "last_approach": null
    },
    {
      "id": "subtask-5",
      "description": "Update integration tests (if any) to verify get_recovery_hints() is called instead of get_failed_approaches() during orchestration flow",
      "status": "pending",
      "attempts": 0,
      "last_approach": null
    },
    {
      "id": "subtask-6",
      "description": "Run full quality check suite (ruff format, ruff check, mypy, pytest with coverage) and fix any issues",
      "status": "pending",
      "attempts": 0,
      "last_approach": null
    },
    {
      "id": "subtask-7",
      "description": "Verify coverage requirements: ensure loop.py maintains >= 80% coverage, update tests if needed",
      "status": "pending",
      "attempts": 0,
      "last_approach": null
    },
    {
      "id": "subtask-8",
      "description": "Test the change manually by running a sample orchestration task to verify recovery hints appear correctly in agent prompts",
      "status": "pending",
      "attempts": 0,
      "last_approach": null
    },
    {
      "id": "subtask-9",
      "description": "Update claude-progress.txt with implementation notes and commit all changes with descriptive message",
      "status": "pending",
      "attempts": 0,
      "last_approach": null
    }
  ],
  "created_at": "2026-01-28T08:32:00Z",
  "updated_at": "2026-01-28T08:32:00Z"
}
